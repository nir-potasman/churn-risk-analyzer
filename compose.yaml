services:
  manager-service:
    build:
      context: .
      dockerfile: services/manager/Dockerfile
    ports:
      - "8080:8080"
    env_file: .env
    environment:
      - TRANSCRIPT_AGENT_URL=http://transcript-service:8001
      - CHURN_AGENT_URL=http://churn-service:8002
    depends_on:
      - transcript-service
      - churn-service

  transcript-service:
    build:
      context: .
      dockerfile: services/transcript/Dockerfile
    ports:
      - "8001:8001"
    env_file: .env

  churn-service:
    build:
      context: .
      dockerfile: services/churn/Dockerfile
    ports:
      - "8002:8002"
    env_file: .env

  frontend-service:
    build:
      context: .
      dockerfile: services/frontend/Dockerfile
    ports:
      - "3000:3000"
    env_file: .env
    environment:
      - MANAGER_SERVICE_URL=http://manager-service:8080
    depends_on:
      - manager-service
